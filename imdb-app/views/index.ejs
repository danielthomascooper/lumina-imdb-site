<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
</head>

<body>
  <h1>
    <%= title %>
  </h1>
  <p>Welcome to <%= title %>
  </p>

  <script>
    const compareStrings = (a, b) => {
      if (a < b) return -1;
      if (a > b) return 1;

      return 0;
    }

    const compare = (a, b) => {
      const splitA = a.split(" ");
      const splitB = b.split(" ");
      const lastA = splitA[splitA.length - 1];
      const lastB = splitB[splitB.length - 1];

      return lastA === lastB ?
        compareStrings(splitA[0], splitB[0]) :
        compareStrings(lastA, lastB);
    }

    const userList = []
    fetch('http://localhost:3000/movies?userlist')
      .then((res) => res.json())
      .then((res) => {
        res.data.forEach(element => {
          var full_name = element.firstName + " " + element.lastName
          userList.push(full_name)
        });
        userList.sort(compare);
      });
  </script>

  <script>
    function showList() {
      document.getElementById("usernameList").classList.toggle("show");
    }

    function filterFunction() {
      
    }
  </script>

  <div>
    <input type="text" placeholder="Search..." id="myInput" onkeyup="filterFunction()">
    <ul id="usernameList">

    </ul>
  </div>

</body>

</html>